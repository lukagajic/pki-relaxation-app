<div fxLayout="column" fxLayoutGap="10px">
    <div fxLayoutAlign="center center">
        <h1>Joined events</h1>
    </div>
    <p *ngIf="joinedEventsDataSource.data.length <= 0">You didn't join to any of the events</p>

    <div fxLayoutAlign="center center">
        <mat-form-field>
            <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>
    </div>

    <mat-table [dataSource]="joinedEventsDataSource" matSort>
        <!-- Name -->
        <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Name
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.name }} 
            </mat-cell>
        </ng-container>

        <!-- Description -->
        <ng-container matColumnDef="description">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Description
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.description }} 
            </mat-cell>
        </ng-container>

        <!-- Category -->
        <ng-container matColumnDef="category">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Category
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.category | titlecase }} 
            </mat-cell>
        </ng-container>

        <!-- City -->
        <ng-container matColumnDef="city">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                City
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.city }} 
            </mat-cell>
        </ng-container>

        <!-- Address -->
        <ng-container matColumnDef="address">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Address
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.address }} 
            </mat-cell>
        </ng-container>

        <!-- Starts at -->
        <ng-container matColumnDef="startsAt">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Starts at
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.startsAt | date }} 
            </mat-cell>
        </ng-container>

        <!-- Ends at -->
        <ng-container matColumnDef="endsAt">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Ends at
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.endsAt | date }} 
            </mat-cell>
        </ng-container>

        <!-- Rating -->
        <ng-container matColumnDef="rating">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Rating
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.rating }} 
            </mat-cell>
        </ng-container>

        <!-- Expected attendance -->
        <ng-container matColumnDef="expectedAttendance">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Expected attendance
            </mat-header-cell>
            <mat-cell *matCellDef="let event">
               {{ event.expectedAttendance }} 
            </mat-cell>
        </ng-container>

        <!-- Opcije -->
        <ng-container matColumnDef="options">
            <mat-header-cell *matHeaderCellDef>
                Options
            </mat-header-cell>
            <!-- Isprobati sa mat menu -->
            <mat-cell *matCellDef="let event" fxLayout="column" fxLayoutGap="5px">
                <button (click)="leaveEvent(event)" class="btn-option" mat-mini-fab color="warn" matTooltip="Leave event">
                    <mat-icon>
                        remove
                    </mat-icon>                    
                </button>
               <!-- <button class="btn-option" *ngIf="currentUser.role == 'admin'" mat-raised-button color="accent" matTooltip="Edit event">
                    <mat-icon>
                        edit
                    </mat-icon>
               </button> -->
               <!-- <button (click)="onDelete(event)" class="btn-option" *ngIf="currentUser.role == 'admin'" mat-raised-button color="warn" matTooltip="Delete event">
                    <mat-icon>
                        delete
                    </mat-icon>
               </button>  -->
            </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let rows; columns: displayedColumns;"></mat-row>
    </mat-table>
    <mat-paginator [pageSize]="10" [pageSizeOptions]="[10, 15, 20, 25, 30, 50]"></mat-paginator>
</div>